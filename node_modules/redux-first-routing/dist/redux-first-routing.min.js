!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.ReduxFirstRouting={})}(this,function(e){"use strict";function t(e){return e&&e.__esModule?e.default:e}function n(e,t){return t={exports:{}},e(t,t.exports),t.exports}function r(e){return"/"===e.charAt(0)}function o(e,t){for(var n=t,r=n+1,o=e.length;r<o;n+=1,r+=1)e[n]=e[r];e.pop()}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=e&&e.split("/")||[],a=t&&t.split("/")||[],i=e&&r(e),c=t&&r(t),u=i||c;if(e&&r(e)?a=n:n.length&&(a.pop(),a=a.concat(n)),!a.length)return"/";var s=void 0;if(a.length){var f=a[a.length-1];s="."===f||".."===f||""===f}else s=!1;for(var h=0,l=a.length;l>=0;l--){var d=a[l];"."===d?o(a,l):".."===d?(o(a,l),h++):h&&(o(a,l),h--)}if(!u)for(;h--;h)a.unshift("..");!u||""===a[0]||a[0]&&r(a[0])||a.unshift("");var p=a.join("/");return s&&"/"!==p.substr(-1)&&(p+="/"),p}function i(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(Array.isArray(e))return Array.isArray(t)&&e.length===t.length&&e.every(function(e,n){return i(e,t[n])});var n=void 0===e?"undefined":g(e);if(n!==(void 0===t?"undefined":g(t)))return!1;if("object"===n){var r=e.valueOf(),o=t.valueOf();if(r!==e||o!==t)return i(r,o);var a=Object.keys(e),c=Object.keys(t);return a.length===c.length&&a.every(function(n){return i(e[n],t[n])})}return!1}function c(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function u(e,t){try{return decodeURIComponent(e.join(""))}catch(e){}if(1===e.length)return e;t=t||1;var n=e.slice(0,t),r=e.slice(t);return Array.prototype.concat.call([],u(n),u(r))}function s(e){try{return decodeURIComponent(e)}catch(r){for(var t=e.match(T),n=1;n<t.length;n++)e=u(t,n).join(""),t=e.match(T);return e}}function f(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},n=_.exec(e);n;){try{t[n[0]]=decodeURIComponent(n[0])}catch(e){var r=s(n[0]);r!==n[0]&&(t[n[0]]=r)}n=_.exec(e)}t["%C2"]="�";for(var o=Object.keys(t),a=0;a<o.length;a++){var i=o[a];e=e.replace(new RegExp(i,"g"),t[i])}return e}function h(e){var t;switch(e.arrayFormat){case"index":return function(e,n,r){t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===r[e]&&(r[e]={}),r[e][t[1]]=n):r[e]=n};case"bracket":return function(e,n,r){t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==r[e]?r[e]=[].concat(r[e],n):r[e]=[n]:r[e]=n};default:return function(e,t,n){void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}function l(e){return Array.isArray(e)?e.sort():"object"==typeof e?l(Object.keys(e)).sort(function(e,t){return Number(e)-Number(t)}).map(function(t){return e[t]}):e}function d(e,t){t.dispatch(q({pathname:e.location.pathname,search:e.location.search,hash:e.location.hash})),e.listen(function(e){t.dispatch(q({pathname:e.pathname,search:e.search,hash:e.hash}))})}var p=function(){},v=function(e,t,n,r,o,a,i,c){if(!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var s=[n,r,o,a,i,c],f=0;(u=new Error(t.replace(/%s/g,function(){return s[f++]}))).name="Invariant Violation"}throw u.framesToPop=1,u}},y=Object.freeze({default:a}),g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m=Object.freeze({default:i}),O=n(function(e,t){t.__esModule=!0;t.addLeadingSlash=function(e){return"/"===e.charAt(0)?e:"/"+e},t.stripLeadingSlash=function(e){return"/"===e.charAt(0)?e.substr(1):e};var n=t.hasBasename=function(e,t){return new RegExp("^"+t+"(\\/|\\?|#|$)","i").test(e)};t.stripBasename=function(e,t){return n(e,t)?e.substr(t.length):e},t.stripTrailingSlash=function(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e},t.parsePath=function(e){var t=e||"/",n="",r="",o=t.indexOf("#");-1!==o&&(r=t.substr(o),t=t.substr(0,o));var a=t.indexOf("?");return-1!==a&&(n=t.substr(a),t=t.substr(0,a)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}},t.createPath=function(e){var t=e.pathname,n=e.search,r=e.hash,o=t||"/";return n&&"?"!==n&&(o+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(o+="#"===r.charAt(0)?r:"#"+r),o}});t(O);var b=y&&a||y,w=m&&i||m,E=n(function(e,t){function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.locationsAreEqual=t.createLocation=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(b),a=n(w);t.createLocation=function(e,t,n,a){var i=void 0;"string"==typeof e?(i=(0,O.parsePath)(e)).state=t:(void 0===(i=r({},e)).pathname&&(i.pathname=""),i.search?"?"!==i.search.charAt(0)&&(i.search="?"+i.search):i.search="",i.hash?"#"!==i.hash.charAt(0)&&(i.hash="#"+i.hash):i.hash="",void 0!==t&&void 0===i.state&&(i.state=t));try{i.pathname=decodeURI(i.pathname)}catch(e){throw e instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):e}return n&&(i.key=n),a?i.pathname?"/"!==i.pathname.charAt(0)&&(i.pathname=(0,o.default)(i.pathname,a.pathname)):i.pathname=a.pathname:i.pathname||(i.pathname="/"),i},t.locationsAreEqual=function(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&(0,a.default)(e.state,t.state)}});t(E);var R=n(function(e,t){t.__esModule=!0;var n=function(e){return e&&e.__esModule?e:{default:e}}(p),r=function(){var e=null,t=[];return{setPrompt:function(t){return(0,n.default)(null==e,"A history supports only one prompt at a time"),e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,r,o,a){if(null!=e){var i="function"==typeof e?e(t,r):e;"string"==typeof i?"function"==typeof o?o(i,a):((0,n.default)(!1,"A history needs a getUserConfirmation function in order to use a prompt message"),a(!0)):a(!1!==i)}else a(!0)},appendListener:function(e){var n=!0,r=function(){n&&e.apply(void 0,arguments)};return t.push(r),function(){n=!1,t=t.filter(function(e){return e!==r})}},notifyListeners:function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach(function(e){return e.apply(void 0,n)})}}};t.default=r});t(R);var A=n(function(e,t){t.__esModule=!0;t.canUseDOM=!("undefined"==typeof window||!window.document||!window.document.createElement),t.addEventListener=function(e,t,n){return e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)},t.removeEventListener=function(e,t,n){return e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n)},t.getConfirmation=function(e,t){return t(window.confirm(e))},t.supportsHistory=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&(window.history&&"pushState"in window.history)},t.supportsPopStateOnHashChange=function(){return-1===window.navigator.userAgent.indexOf("Trident")},t.supportsGoWithoutReloadUsingHash=function(){return-1===window.navigator.userAgent.indexOf("Firefox")},t.isExtraneousPopstateEvent=function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")}});t(A);var j=t(n(function(e,t){function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(p),i=n(v),c=n(R),u=function(){try{return window.history.state||{}}catch(e){return{}}},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,i.default)(A.canUseDOM,"Browser history needs a DOM");var t=window.history,n=(0,A.supportsHistory)(),s=!(0,A.supportsPopStateOnHashChange)(),f=e.forceRefresh,h=void 0!==f&&f,l=e.getUserConfirmation,d=void 0===l?A.getConfirmation:l,p=e.keyLength,v=void 0===p?6:p,y=e.basename?(0,O.stripTrailingSlash)((0,O.addLeadingSlash)(e.basename)):"",g=function(e){var t=e||{},n=t.key,r=t.state,o=window.location,i=o.pathname+o.search+o.hash;return(0,a.default)(!y||(0,O.hasBasename)(i,y),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+i+'" to begin with "'+y+'".'),y&&(i=(0,O.stripBasename)(i,y)),(0,E.createLocation)(i,r,n)},m=function(){return Math.random().toString(36).substr(2,v)},b=(0,c.default)(),w=function(e){o(D,e),D.length=t.length,b.notifyListeners(D.location,D.action)},R=function(e){(0,A.isExtraneousPopstateEvent)(e)||x(g(e.state))},j=function(){x(g(u()))},k=!1,x=function(e){if(k)k=!1,w();else{b.confirmTransitionTo(e,"POP",d,function(t){t?w({action:"POP",location:e}):L(e)})}},L=function(e){var t=D.location,n=T.indexOf(t.key);-1===n&&(n=0);var r=T.indexOf(e.key);-1===r&&(r=0);var o=n-r;o&&(k=!0,U(o))},P=g(u()),T=[P.key],_=function(e){return y+(0,O.createPath)(e)},C=function(e,o){(0,a.default)(!("object"===(void 0===e?"undefined":r(e))&&void 0!==e.state&&void 0!==o),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");var i=(0,E.createLocation)(e,o,m(),D.location);b.confirmTransitionTo(i,"PUSH",d,function(e){if(e){var r=_(i),o=i.key,c=i.state;if(n)if(t.pushState({key:o,state:c},null,r),h)window.location.href=r;else{var u=T.indexOf(D.location.key),s=T.slice(0,-1===u?0:u+1);s.push(i.key),T=s,w({action:"PUSH",location:i})}else(0,a.default)(void 0===c,"Browser history cannot push state in browsers that do not support HTML5 history"),window.location.href=r}})},S=function(e,o){(0,a.default)(!("object"===(void 0===e?"undefined":r(e))&&void 0!==e.state&&void 0!==o),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");var i=(0,E.createLocation)(e,o,m(),D.location);b.confirmTransitionTo(i,"REPLACE",d,function(e){if(e){var r=_(i),o=i.key,c=i.state;if(n)if(t.replaceState({key:o,state:c},null,r),h)window.location.replace(r);else{var u=T.indexOf(D.location.key);-1!==u&&(T[u]=i.key),w({action:"REPLACE",location:i})}else(0,a.default)(void 0===c,"Browser history cannot replace state in browsers that do not support HTML5 history"),window.location.replace(r)}})},U=function(e){t.go(e)},M=function(){return U(-1)},F=function(){return U(1)},H=0,B=function(e){1===(H+=e)?((0,A.addEventListener)(window,"popstate",R),s&&(0,A.addEventListener)(window,"hashchange",j)):0===H&&((0,A.removeEventListener)(window,"popstate",R),s&&(0,A.removeEventListener)(window,"hashchange",j))},I=!1,G=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=b.setPrompt(e);return I||(B(1),I=!0),function(){return I&&(I=!1,B(-1)),t()}},N=function(e){var t=b.appendListener(e);return B(1),function(){B(-1),t()}},D={length:t.length,action:"POP",location:P,createHref:_,push:C,replace:S,go:U,goBack:M,goForward:F,block:G,listen:N};return D};t.default=s})),k=Object.getOwnPropertySymbols,x=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable,P=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,r,o=c(e),a=1;a<arguments.length;a++){n=Object(arguments[a]);for(var i in n)x.call(n,i)&&(o[i]=n[i]);if(k){r=k(n);for(var u=0;u<r.length;u++)L.call(n,r[u])&&(o[r[u]]=n[r[u]])}}return o},T=new RegExp("%[a-f0-9]{2}","gi"),_=new RegExp("(%[a-f0-9]{2})+","gi"),C=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return f(e)}},S=function(e,t){var n=h(t=P({arrayFormat:"none"},t)),r=Object.create(null);return"string"!=typeof e?r:(e=e.trim().replace(/^(\?|#|&)/,""))?(e.split("&").forEach(function(e){var t=e.replace(/\+/g," ").split("="),o=t.shift(),a=t.length>0?t.join("="):void 0;a=void 0===a?null:C(a),n(C(o),a,r)}),Object.keys(r).sort().reduce(function(e,t){var n=r[t];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?e[t]=l(n):e[t]=n,e},Object.create(null))):r},U="ROUTER/PUSH",M="ROUTER/REPLACE",F="ROUTER/GO",H="ROUTER/GO_BACK",B=function(e){return{type:U,payload:e}},I=function(e){return{type:M,payload:e}},G=function(e){return{type:F,payload:e}},N=function(){return{type:H}},D=function(){return{type:"ROUTER/GO_FORWARD"}},q=function(e){var t=e.pathname,n=e.search,r=e.hash;return{type:"ROUTER/LOCATION_CHANGE",payload:{pathname:t,search:n,queries:S(n),hash:r}}},W=function(e){return function(){return function(t){return function(n){switch(n.type){case U:e.push(n.payload);break;case M:e.replace(n.payload);break;case F:e.go(n.payload);break;case H:e.goBack();break;case"ROUTER/GO_FORWARD":e.goForward();break;default:return t(n)}}}}},$=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Y={pathname:"/",search:"",queries:{},hash:""},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments[1];switch(t.type){case"ROUTER/LOCATION_CHANGE":return $({},e,t.payload);default:return e}};e.createBrowserHistory=j,e.startListener=d,e.PUSH=U,e.REPLACE=M,e.GO=F,e.GO_BACK=H,e.GO_FORWARD="ROUTER/GO_FORWARD",e.LOCATION_CHANGE="ROUTER/LOCATION_CHANGE",e.push=B,e.replace=I,e.go=G,e.goBack=N,e.goForward=D,e.locationChange=q,e.routerMiddleware=W,e.routerReducer=z,Object.defineProperty(e,"__esModule",{value:!0})});
